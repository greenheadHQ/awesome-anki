# 임베딩 텍스트 전처리

## 목적

임베딩 생성 전 노이즈를 제거하여 의미적 유사도 정확도 향상.

## 전처리 단계

### 1. Cloze 구문 정리

```
{{c1::DNS}} → DNS
{{c2::TCP::프로토콜}} → TCP
```

Cloze 마크업을 제거하고 내용만 추출.

### 2. HTML 태그 제거

```
<span style="color:red">중요</span> → 중요
<b>강조</b> → 강조
<br> → (제거)
```

### 3. 컨테이너 구문 제거

```
::: tip 팁 제목
내용
:::
→ 내용
```

`::: type`, `:::` 닫는 태그 제거, 내용만 보존.

### 4. nid 링크에서 제목 추출

```
[도메인 네임 구조|nid1757399484677] → 도메인 네임 구조
```

링크 마크업 제거, 제목 텍스트만 보존.

## 구현 위치

`packages/core/src/embedding/client.ts`의 `preprocessTextForEmbedding()` 함수.
